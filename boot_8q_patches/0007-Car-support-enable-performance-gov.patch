From: Jiri Rezler <jiri.rezler@nxp.com>
Date:   Fri Oct 4 10:06:12 2024 +0200

    Support for Car image type has been added, enable performance gov.
    
Signed-off-by: Jiri Rezler <jiri.rezler@nxp.com>
---

diff --git a/android/abi_gki_aarch64_imx b/android/abi_gki_aarch64_imx
index b9836dde5116..108ff1509153 100644
--- a/android/abi_gki_aarch64_imx
+++ b/android/abi_gki_aarch64_imx
@@ -2785,4 +2785,6 @@
   xsk_tx_peek_desc
   xsk_tx_release
   xsk_uses_need_wakeup
+  device_is_bound
+  of_update_property
   TKT340553_SW_WORKAROUND
diff --git a/arch/arm64/configs/gki_defconfig b/arch/arm64/configs/gki_defconfig
index 6aafdc980523..1474491ca049 100644
--- a/arch/arm64/configs/gki_defconfig
+++ b/arch/arm64/configs/gki_defconfig
@@ -83,8 +83,10 @@ CONFIG_ARM_PSCI_CPUIDLE=y
 CONFIG_CPU_FREQ=y
 CONFIG_CPU_FREQ_STAT=y
 CONFIG_CPU_FREQ_TIMES=y
+CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE=y
 CONFIG_CPU_FREQ_GOV_POWERSAVE=y
 CONFIG_CPU_FREQ_GOV_CONSERVATIVE=y
+CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
 CONFIG_ARM_SCPI_CPUFREQ=y
 CONFIG_ARM_SCMI_CPUFREQ=y
 CONFIG_VIRTUALIZATION=y
diff --git a/drivers/base/dd.c b/drivers/base/dd.c
index 3aa56fd5ca64..ddbebd46993e 100644
--- a/drivers/base/dd.c
+++ b/drivers/base/dd.c
@@ -393,6 +393,7 @@ bool device_is_bound(struct device *dev)
 {
 	return dev->p && klist_node_attached(&dev->p->knode_driver);
 }
+EXPORT_SYMBOL_GPL(device_is_bound);
 
 static void driver_bound(struct device *dev)
 {
diff --git a/drivers/extcon/extcon.c b/drivers/extcon/extcon.c
index e7f55c021e56..f3ac81e512f0 100644
--- a/drivers/extcon/extcon.c
+++ b/drivers/extcon/extcon.c
@@ -180,6 +180,16 @@ static const struct __extcon_info {
 	},
 
 	/* Miscellaneous external connector */
+	[EXTCON_VEHICLE_RPMSG_REGISTER] = {
+		.type = EXTCON_TYPE_MISC,
+		.id = EXTCON_VEHICLE_RPMSG_REGISTER,
+		.name = "VEHICLE_RPMSG_REGISTER",
+	},
+	[EXTCON_VEHICLE_RPMSG_EVENT] = {
+		.type = EXTCON_TYPE_MISC,
+		.id = EXTCON_VEHICLE_RPMSG_EVENT,
+		.name = "VEHICLE_RPMSG_EVENT",
+	},
 	[EXTCON_DOCK] = {
 		.type = EXTCON_TYPE_MISC,
 		.id = EXTCON_DOCK,
diff --git a/drivers/of/base.c b/drivers/of/base.c
index df8d9733b054..c9563dbe202c 100644
--- a/drivers/of/base.c
+++ b/drivers/of/base.c
@@ -1686,6 +1686,7 @@ int __of_update_property(struct device_node *np, struct property *newprop,
 
 	return 0;
 }
+EXPORT_SYMBOL_GPL(of_update_property);
 
 /*
  * of_update_property - Update a property in a node, if the property does
diff --git a/include/linux/extcon.h b/include/linux/extcon.h
index e596a0abcb27..2d76af871c62 100644
--- a/include/linux/extcon.h
+++ b/include/linux/extcon.h
@@ -80,6 +80,8 @@
 #define EXTCON_DISP_EDP		47	/* Embedded Display Port */
 
 /* Miscellaneous external connector */
+#define EXTCON_VEHICLE_RPMSG_REGISTER  58
+#define EXTCON_VEHICLE_RPMSG_EVENT     59
 #define EXTCON_DOCK		60
 #define EXTCON_JIG		61
 #define EXTCON_MECHANICAL	62
